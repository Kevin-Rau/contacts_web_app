<h1>Create User</h1>

<div ng-show="nac.error_message" class="alert alert-danger alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert">
    <span>&times;</span>
  </button>
  <p>{{nac.error_message}}</p>
</div>

<form name="newUser" ng-submit="nac.create_account()" class="form-horizontal" role="form">
  <div class="form-group">
    <label for="login" class="col-sm-2 control-label">Username</label>
    <div class="col-sm-10">
      <input type="text"
        ng-model="nac.user.login"
        class="form-control"
        name="login"
        ng-change="nac.check_username(newUser)"
        id="login"
        placeholder="Enter Login"
        ng-minlength="1"
        required="">
    </div>
  </div>
  <div class="form-group" ng-show="newUser.login.$dirty &&newUser.login.$invalid">
    <div class="col-sm-offset-2 col-sm-10">
      <p>
        <span style="color: red" ng-show="newUser.login.$error.required">Login is required. </span>
        <span style="color: red" ng-show="newUser.login.$error.login">This login is already taken.</span>
      </p>
    </div>
  </div>
  <div class="form-group">
    <label for="name" class="col-sm-2 control-label">Name</label>
    <div class="col-sm-10">
      <input type="text"
        ng-model="nac.user.name"
        class="form-control"
        ng-minlength="3"
        id="name"
        name="uname"
        placeholder="Enter Firstname Lastname"
        required="">
    </div>
  </div>
  <div class="form-group" ng-show="newUser.uname.$dirty &&newUser.uname.$invalid">
    <div class="col-sm-offset-2 col-sm-10">
      <p>
        <span style="color: red" ng-show="newUser.uname.$error.required">Name is required. </span>
        <span style="color: red" ng-show="newUser.uname.$error.minlength">Name must be at least three characters long.</span>
      </p>
    </div>
  </div>
  <div class="form-group">
    <label for="password" class="col-sm-2 control-label">Password</label>
    <div class="col-sm-10">
      <input type="password"
        name="pw1"
        ng-model="nac.user.password"
        ng-minlength="1"
        ng-change="nac.password_updated(newUser)"
        class="form-control"
        id="password"
        placeholder="Enter Password"
        required="">
    </div>
  </div>
  <div class="form-group" ng-show="(newUser.pw1.$dirty || newUser.pw2.$dirty) && newUser.pw1.$invalid">
    <div class="col-sm-offset-2 col-sm-10">
      <p>
        <span style="color: red" ng-show="newUser.pw1.$error.required">Password is required. </span>
        <span style="color: red" ng-show="newUser.pw2.$error.required"><br>Verify Password is required. </span>
        <span style="color: red" ng-show="newUser.pw1.$error.pwmatch"><br>Passwords must match.</span>
      </p>
    </div>
  </div>
  <div class="form-group">
    <label for="password2" class="col-sm-2 control-label">Verify Password</label>
    <div class="col-sm-10">
      <input type="password"
        ng-model="nac.user.password2"
        name="pw2"
        ng-minlength="1"
        ng-change="nac.password_updated(newUser)"
        class="form-control"
        id="password2"
        placeholder="Enter Password Again"
        required="">
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="nac.user.admin"> Administrator?
        </label>
      </div>
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <input type="submit"
        class="btn btn-success btn-lg"
        value="Submit"
        ng-disabled="newUser.$invalid">
    </div>
  </div>
</form>

